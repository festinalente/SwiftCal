function SwiftCal(){var O,d,U,F,R,r=!1,G=[],N=[],W=[],J=[],o=1,P=!1,l=0;function s(e,t){!1===J.includes(t)&&(e.style.backgroundColor="#fc3",J.push(t),G[J.length-1]={day:t,humanDate:H(t)})}function Y(e,n){var t,l,d,a="";if(n.children)for(i=n.children.length-1;0<=i;i--)n.children[i].remove();function r(e,t){return e-t}e&&0<e.length&&(d=[],t=function(e){for(var t=[],n=0;n<e.length;n++)if(t.push(u(e[n])),n===e.length-1)return function(e,t){for(var n=JSON.parse(JSON.stringify(t)),i=t.sort(r),l=0;l<n.length;l++){var a=i.indexOf(n[l]);if(d.splice(l,1,e[a]),l===t.length-1)return d}}(e,t)}(e),l=J.indexOf(n.id),G[l].times=JSON.parse(JSON.stringify(e)),t.forEach(function(e,t){a+=e+" ";e=document.createElement("p");e.classList.add("calendarTime"),e.style.marginBottom="0px",e.textContent=a,!1===n.classList.contains("filler")&&(n.style.backgroundColor="#fc3",a=(t%2==1&&(e.style.borderBottomStyle="solid"),n.appendChild(e),""))}))}function e(){return G.forEach(function(e,t){document.getElementById(e.day).style.backgroundColor="#fff",G.splice(1,t),J.splice(1,t)}),this}function a(){for(var e=d.dataset.dayofweek,t=document.querySelectorAll("[data-dayofweek='"+e+"']"),n=0;n<t.length;n++){var l=document.getElementById(t[n].id);l!==d&&(function(e,t){if(t=J.indexOf(t),e.style.backgroundColor="#fff",J.splice(1,t),G.splice(1,t),e.children)for(i=e.children.length-1;0<=i;i--)e.children[i].remove()}(l,t[n].id),function(e){e=e?document.getElementById(e):document.getElementById(G[G.length-1].day);for(i=e.children.length;0<=i;i--)e.children[i]&&e.children[i].remove()}(t[n].id))}}function $(e){var t=e.target;if(o++,!(d=t).classList.contains("blocked")){U.querySelector(".makeTimeRuleGlobal")&&(U.querySelector(".makeTimeRuleGlobalClass").textContent=h("Set these times for all ","days"));var n=t.dataset.day,i=t.parentElement.parentElement.dataset.month,e=t.parentElement.parentElement.dataset.year,i=e+"-"+i+"-"+n;if(!0!==r)if(!0!==O){if(!1===J.includes(i)){n=!!U.querySelector(".timeChooser")&&U.querySelector(".timeChooser").querySelector(".makeTimeRuleGlobal");n&&!0===n.checked&&c(i),s(t,i),v(i),!0===P&&(F.style.height=U.clientHeight+"px",F.style.width=U.clientWidth+"px",F.style.display="inline",Q(R,U))}else if(t.style.backgroundColor="white",J.splice(J.indexOf(i),1),G.splice(J.indexOf(i),1),!0===P)for(;t.children[0];)t.removeChild(t.children[0])}else{if(o%2==0){J.length=0,G.length=0;for(var l=document.getElementsByClassName("dayTime"),a=0;a<l.length;a++)l[a].classList.contains("blocked")||(l[a].style.backgroundColor="white");t.style.backgroundColor="#fc3",s(t,i)}o%2==1&&(s(t,i),function(){function e(){return 0<i-l?[l,i]:[i,l]}for(var t=G[0].day,n=G[1].day,i=U.querySelector("[id='"+t+"']").dataset.dayindex,l=U.querySelector("[id='"+n+"']").dataset.dayindex,t=parseInt(e()[0]),a=parseInt(e()[1]),d=t;d<=a;d++){var r=U.querySelector('[data-dayindex = "'+d+'"]');if(r.classList.contains("blocked")){U.querySelector("[id='"+n+"']").style.backgroundColor="white",J.splice(1,1),G.splice(1,1);break}r=r.id;s(U.querySelector("[id='"+r+"']"),r),d===a&&(J.push(J.splice(1,1)[0]),G.push(G.splice(1,1)[0]))}}())}}}times={indexes:[],values:[]},time={};function H(e){e=e.split("-");return e[0]+"-"+(parseInt(e[1])+1)+"-"+e[2]}function V(e,t,n,i,l){var a=document.createElement("p");a.id=t,a.textContent=n,e.appendChild(a),a.title=i,a.classList.add("deleteButton"),a.addEventListener("click",function(e){l(e)})}function c(e){var e=document.getElementById(e).dataset.dayofweek,n=document.querySelectorAll("[data-dayofweek='"+e+"']");n.forEach(function(e,t){!1===e.classList.contains("filler")&&(s(document.getElementById(e.id),e.id),v(e.id),n.length)})}function j(e){document.querySelector("#shopTimeTable").querySelectorAll(".dayTime").forEach(function(e){"rgb(255, 204, 51)"===e.style.backgroundColor&&0===e.children.length&&e.click()}),times.values%2==1?swiftmoAlert&&swiftmoAlert.setContent("Warning, you're missing an end time for the last time gap you entered.").toggle():0===times.values.length?U.querySelector(".timeChooserModal").style.display="none":u(times.values[times.values.length-1])<u(times.values[times.values.length-2])?swiftmoAlert&&swiftmoAlert.setContent("Warning, you've entered an end time which is before the start time.").toggle():!1===function(e){var t=[];if(e.length%2==0)for(var n=0;n<e.length;n++)t.push(u(e[n]));for(var i=0;i<t.length;i++)if(2<=i&&i%2==0)for(var l=t[i],a=t[i+1],d=0;d<t.length;d++)if(d%2==0&&i!==d){var r=t[d],o=t[d+1];return!(l<o&&o<a)&&(!(r<l&&a<o)&&((l!==r||a!==o)&&!(r<a&&a<o)))}}(times.values)?swiftmoAlert&&swiftmoAlert.setContent("Warning, that time overlaps with other times you've already selected.").toggle():U.querySelector(".timeChooserModal").style.display="none"}function u(e){e=e.split(":");return 60*parseInt(e[0])*60*1e3+60*parseInt(e[1])*1e3}function z(){var e=U.querySelector(".timeChooser"),t=e.querySelector(".makeTimeRuleGlobal"),n=U.querySelectorAll(".timePickerContainer");2<=n.length?(e.removeChild(n[n.length-1]),times.indexes.length%2==0?(times.indexes.splice(times.indexes.length-2,2),times.values.splice(times.values.length-2,2)):(times.indexes.splice(times.indexes.length-1,1),times.values.splice(times.values.length-1,1)),Y(times.values,d)):(e.querySelectorAll("select").forEach(function(e){e.selectedIndex=0}),times.indexes.length%2==0?(times.indexes.splice(times.indexes.length-2,2),times.values.splice(times.values.length-2,2)):(times.indexes.splice(times.indexes.length-1,1),times.values.splice(times.values.length-1,1)),t.checked=!1,Y(times.values,d),0===U.querySelector(d.id).children.length&&d.click()),(!0===t.checked?c:a)(d.id)}function K(){var e,t,n,i;2*U.querySelectorAll(".timePickerContainer").length===times.values.length?((i=document.createElement("div")).classList.add("timePickerContainer"),R.appendChild(i),(e=document.createElement("div")).textContent="Add time:",e.classList.add("deleteDiv"),i.appendChild(e),f("Start",i,n=l),f("End",i,n),n=e=i,i=document.createElement("p"),e=h("Set these times for all ","days"),0===l?(i.textContent=e,i.classList.add("timeSelectP","makeTimeRuleGlobalClass"),i.htmlFor="makeTimeRuleGlobal",n.appendChild(i),(t=document.createElement("input")).setAttribute("type","checkbox"),t.name="makeTimeRuleGlobal",t.classList.add("makeTimeRuleGlobal"),n.appendChild(t),t.addEventListener("click",function(e){(!1===t.checked?a:c)(d.id)})):i.textContent=h("Set these times for all ","days"),m(),l++):swiftmoAlert?swiftmoAlert.setContent("Fill in the current time values before adding another.").toggle():alert("Fill in the current time values before adding another.")}function m(){var e=document.querySelectorAll(".timePickerContainer");e[e.length-1].scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}function h(e,t,n){return e+["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur"][n=n||parseInt(d.dataset.dayofweek)]+t}function f(e,t,n){var i=document.createElement("div");i.classList.add("timeContainer");var l=document.createElement("p");l.classList.add("timeSelectP"),l.textContent=e+":",i.appendChild(l);l=document.createElement("div");l.id=e+"-"+n,n&&l.classList.add(n),l.classList.add("hour","times",e),i.appendChild(l),y("hh",24,l.id,l,e,n),y("mm",59,l.id,l,e,n),t.appendChild(i)}function y(t,e,n,i,l,a){time[t]="00";var d=document.createElement("select");d.classList.add(t,n+"-"+t,"timeSelect");var r=0,n=document.createElement("option");for(n.textContent=t,n.value="00",d.appendChild(n);r<=e;){var o=document.createElement("option"),s=r.toString();1===s.length&&(s="0"+r),o.value=s,o.textContent=s,d.appendChild(o),r++}d.addEventListener("click",function(){var e;time[t]=d.value,"hh"===t&&(time.mm="00",d.nextSibling.selectedIndex="1"),times.indexes.includes(l+"-"+a)?(e=times.indexes.indexOf(l+"-"+a),times.values[e]=time.hh+":"+time.mm):(times.indexes.push(l+"-"+a),times.values.push(time.hh+":"+time.mm)),v(null)}),i.appendChild(d)}function Q(e,t){var n=t.getBoundingClientRect(),i=n.x,t=n.y,n=i+(n.width-e.getBoundingClientRect().width)/2;e.style.top=t+10+"px",e.style.left=n+"px"}function v(e){null===e&&(!0===U.querySelector(".makeTimeRuleGlobal").checked?c(d.id):Y(times.values,d)),e&&Y(times.values,U.querySelector("[id='"+e+"']"))}function X(){let e=function(e){var t=new Uint32Array(e);window.crypto.getRandomValues(t);let n="";for(let e=0;e<t.length;e++)if(n+=t[e],e===t.length-1)return n}(10);if(!document.querySelector("calendar"+e))return e;e()}Date.prototype.addMonths=function(e){var t=new Date(this),n=Math.floor(e/12),e=e-12*n;return n&&t.setFullYear(t.getFullYear()+n),e&&t.setMonth(t.getMonth()+e),t},this.formatDate=function(e){let t=e?new Date(e):new Date;var n=t.getDate(),e=t.getMonth()+1;return`${t.getFullYear()}-${e}-${n}`},this.collectEndUserSelection=function(){return N},this.setSaveAction=function(e){return this},this.datesSelected=function(){return G},this.showTimes=function(){return times},this.datesSelectedTracker=function(){return J},this.clearSelection=function(){return e},this.disable=function(){r=!0},this.range=function(e){return O=e,this},this.calendar=function(e,t,n,i,a,l,d,r,o){function s(n){n.addEventListener("click",function(){var e,t;W.includes(n.id)?(n.style.borderStyle="none",N.splice(W.indexOf(n.id),1),W.splice(W.indexOf(n.id),1)):(n.style.borderStyle="solid",n.style.borderColor="blue",e=n.children[0].textContent.split(" "),t=parseInt(e[1])-parseInt(e[0]),e=document.getElementById(n.id).firstChild.nextSibling.textContent,N.push({day:n.id,duration:1,timeGap:e,humanDate:H(n.id)}),W.push(n.id),!0===a&&!0===l&&(n.id,e=1,t=t,document.getElementById("durationInput"+calendarUniqueId).setAttribute("min",e),document.getElementById("durationInput"+calendarUniqueId).setAttribute("max",t),document.getElementById("durationInput"+calendarUniqueId).value="1",document.getElementById("durationChooserModal"+calendarUniqueId).style.height=U.clientHeight+"px",document.getElementById("durationChooserModal"+calendarUniqueId).style.width=U.clientWidth+"px",document.getElementById("durationChooserModal"+calendarUniqueId).style.display="inline",Q("durationChooser",U),document.addEventListener("click",function(e){var t=document.getElementById("durationInput"+calendarUniqueId).contains(e.target);t&&c(),t||e.target!==document.getElementById("durationChooserModal"+calendarUniqueId)||(document.getElementById("durationChooserModal"+calendarUniqueId).style.display="none",c())})))})}function c(){var e=document.getElementById("durationInput"+calendarUniqueId).value;N[N.length-1].duration=e}function u(e,t){if(t){G=t;for(var n=0;n<=t.length-1;n++){var i,l="[id='"+t[n].day+"']";null!==e.querySelector(l)&&(J.push(t[n].day),e.querySelector(l).style.backgroundColor="#fc3",e.querySelector(l).classList.add("available"),!0===a&&(s(e.querySelector(l)),function(){var e=document.createElement("div");e.classList.add("timeChooserModal"),e.id="durationChooserModal";var t=document.createElement("div");t.classList.add("timeChooser"),t.id="durationChooser",e.appendChild(t),U.appendChild(e);var n=document.createElement("div");n.textContent="Duration:",n.classList.add("deleteDiv"),t.appendChild(n),V(n,"deleteButton","x","close",j),(e=document.createElement("div")).classList.add("timeContainer"),(n=document.createElement("label")).setAttribute("id","calendarLabel"),n.setAttribute("for","hourSelect"),n.textContent="hours:",e.appendChild(n),(n=document.createElement("input")).setAttribute("type","number"),n.id="durationInput",n.classList.add("hour"),e.appendChild(n),t.appendChild(e)}()),!0===P&&Y(t[n].times,e.querySelector(l)),!0===O&&null!==e.querySelector(l)&&!1===e.querySelector(l).classList.contains("filler")&&(e.querySelector(l).style.backgroundColor="#333",e.querySelector(l).classList.add("blocked"),e.querySelector(l).title="No availability on this day",(i=document.createElement("p")).classList.add("calendarTime"),i.textContent="Sold out",e.querySelector(l).appendChild(i)))}}}if(calendarUniqueId=X(),(U=document.createElement("div")).classList.add("calendar"),O=!!r,("string"==typeof e?document.querySelector(e):e).appendChild(U),U.id="calendar"+calendarUniqueId,!0===i&&(P=!0,f=U,(F=document.createElement("div")).classList.add("timeChooserModal"),f.appendChild(F),(f=document.createElement("div")).classList.add("timeCont"),F.appendChild(f),F.addEventListener("click",function(e){!1===e.target.classList.contains("timeChooserModal")||j()}),(R=document.createElement("div")).classList.add("timeChooser"),f.appendChild(R),(f=document.createElement("div")).classList.add("deleteDiv"),V(f,"addTime","+","add a time",K),V(f,"removeTime","-","remove last time",z),V(f,"deleteButton","x","close",j),R.appendChild(f)),void 0===n&&(n=4),!0===d){var m=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],h=document.createElement("div");h.classList.add("dayblockrow");var f=document.createElement("h4");if(f.textContent="Select days of week to block:",h.appendChild(f),m.forEach(function(e,t){var n=document.createElement("input");n.setAttribute("type","checkbox"),n.classList.add("block"),n.name=e,n.dataset.block=m.indexOf(e),h.appendChild(n);n=document.createElement("label");n.for=e,n.textContent=e,h.appendChild(n)}),U.appendChild(h),d)for(var y=document.getElementsByClassName("block"),v=0;v<y.length;v++)y[v].addEventListener("click",function(e){var t=document.querySelectorAll("[data-dayofweek='"+e.target.dataset.block+"']");if(e.target.checked)for(v=0;v<t.length;v++)t[v].classList.add("widthShape","filler");else for(v=0;v<t.length;v++)t[v].classList.remove("filler")})}for(var g,C=[],d=new Date,S=d.getMonth(),E=(d.getFullYear(),["January","February","March","April","May","June","July","August","September","October","November","December"]),b=0,v=0;v<n;v++){C.push(document.createElement("div")),U.appendChild(C[v]),C[v].style.width="15em",C[v].style.backgroundColor="#f15925",C[v].classList.add("month");var k=document.createElement("div");k.textContent=E[(S+v)%12],k.classList.add("monthName"),C[v].appendChild(k);var x=document.createElement("div");x.classList.add("weekrow"),C[v].appendChild(x),["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].forEach(function(e){var t=document.createElement("div");x.appendChild(t),t.textContent=e,t.classList.add("dayName","widthShapeDays")});var w=[],L=document.createElement("div");C[v].appendChild(L),L.classList.add("weekrow");var q=(new Date).addMonths(v).getFullYear(),I=(S+v)%12,A=new Date(q,I).getDay(),T=(new Date).getDate(),B=(g=(S+v+1)%12,k=(new Date).addMonths(v).getFullYear(),new Date(k,g,0).getDate());C[v].dataset.year=q,C[v].dataset.month=I,C[v].id=I+"-"+q;var M=1,D=0;for(p=0;p<=41;p++)p<A&&(w.push(document.createElement("div")),w[p].classList.add("widthShape","filler"),L.appendChild(w[p]),w[p].style.backgroundColor="white",D++),0===v&&p>=A&&p<T+A-1&&(w.push(document.createElement("div")),w[p].classList.add("widthShape","filler"),L.appendChild(w[p]),w[p].style.backgroundColor="white"),p>=A&&p<B+A&&(w.push(document.createElement("div")),w[p].textContent=M,w[p].dataset.day=M,w[p].dataset.dayofweek=D,w[p].dataset.dayindex=b,L.appendChild(w[p]),w[p].classList.add("widthShape","dayTime"),w[p].id=q+"-"+I+"-"+M,w[p].addEventListener("click",$,!1),M++,D++,b++),p>=B+A&&(w.push(document.createElement("div")),w[p].classList.add("widthShape","filler"),L.appendChild(w[p]),w[p].style.backgroundColor="white"),(p+1)%7==0&&(L=document.createElement("div"),C[v].appendChild(L),L.classList.add("weekrow"),D=0);v===n-1&&(u(U,t),function(n,t){if(n&&t){var i=Array.from(n.querySelectorAll(".dayTime")).map(e=>e.id);let e=t.map(e=>e.day);for(var l=0;l<i.length;l++)if(-1===e.indexOf(i[l])){let e=n.querySelector(`[id="${i[l]}"]`);e.classList.add("widthShape","filler"),e.style.backgroundColor="white",e.title="Closed on this day";let t=document.createElement("p");t.classList.add("calendarTime"),t.textContent="closed",e.appendChild(t)}}}(o))}return this}}